<!DOCTYPE html>
<html lang="en">
<!-- 슬라이드 22 실습 : 이벤트 흐름 -->
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>이벤트 흐름</title>
</head>
<body>
    <p style="color:blue">이것은 <span style="color: red;" id="span">문장입니다.</span></p>
    <!-- p태그에는 색상을 blue로, span태그에는 색상을 red로 지정한다. -->
    <form>
        <input type="text" name="s"> <!-- name이 s인 텍스트를 입력하는 창 -->
        <input type="button" value="테스트" id="button"> <!-- 테스트라는 이름의 버튼 -->
        <hr> <!-- 구분선 태그 hr -->
    </form>
    <div id="div" style="color: green;"></div>
    <!-- div태그의 id를 div로, 글자 색상을 green으로 설정 -->
    <script>
        let div = document.getElementById("div"); // 이벤트 메세지 출력 공간
        let button = document.getElementById("button"); // 이벤트 메세지 출력 공간

        // body 객체에 캡쳐 리스너 등록
        document.body.addEventListener("click", capture, true) // 캡쳐 단계 1

        // 타겟 객체에 버블 리스너 등록
        button.addEventListener("click", bubble, false) // 버블 단계 2

        // body 객체에 버블 리스너 등록
        document.body.addEventListener("click", bubble, false) // 버블 단계 3

        function capture(e) { // e는 이벤트 객체
            let obj = e.currentTarget; // 현재 이벤트를 받은 DOM 객체
            let tagName = obj.tagName; // 태그 이름
            div.innerHTML += "<br>capture 단계 : " + tagName + " 태그 " + e.type + "이벤트";
        }

        function bubble(e) { // e는 이벤트 객체
            let obj = e.currentTarget // 현재 이벤트를 받은 DOM 객체
            let tagName = obj.tagName; // 태그 이름
            div.innerHTML += "<br>bubble 단계 : " + tagName + " 태그 " + e.type + "이벤트";
        }
    </script>
</body>
</html>